<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css">
</head>
	<body>
		
		<p id="money">0</p>
		
		<p align="centre">
			<button id="mainClicker">Click Me</button>
			<button id="NEO" disabled>Buy Kamigawa</button>
		</p>
		<p id="rareCard"></p>
		<p id="uncommonCard"></p>


		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"></script>
		<script src="https://code.jquery.com/jquery-3.6.1.min.js" 
		integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
  		crossorigin="anonymous">  			
  		</script>
		<script type="text/javascript" src="data.js"></script>
		<script type="text/javascript">

		var count = 0;
		var cards = JSON.parse(data);

		function getRandomInt(max) {
  			return Math.floor(Math.random() * max);
		}

		$('#mainClicker').on('click', () =>
		{
			count = count+0.01;
			$('#money').text(Math.round(count*100)/100)

			if (count > 2) {
				$('#NEO').removeAttr('disabled')
			} else {
				$('#NEO').prop('disabled', true)
			}			
		})

		$('#NEO').on('click', async function()
		{
			var rareArr = Object.entries(cards[0].data.booster.arena.sheets.rareMythic.cards)
			var uncommonArr = Object.entries(cards[0].data.booster.arena.sheets.sfcUncommon.cards)
			var commonArr = Object.entries(cards[0].data.booster.arena.sheets.sfcCommon.cards)
			var landArr = Object.entries(cards[0].data.booster.arena.sheets.land.cards)
			count = count - 2
			$('#money').text(Math.round(count*100)/100)

			for(var i=0;i<1;i++) {
				$( "<img id='rareCard"+i+"' height=300></img>" ).appendTo( "body" );
				await getRareCard(i)
			}

			for(var i=0;i<3;i++) {
				$( "<img id='uncommonCard"+i+"' height=300></img>" ).appendTo( "body" );
				await getUncommonCard(i)
			}

			for(var i=0;i<10;i++) {
				$( "<img id='commonCard"+i+"' height=300></img>" ).appendTo( "body" );
				await getCommonCard(i)
			}

			for(var i=0;i<1;i++) {
				$( "<img id='landCard"+i+"' height=300></img>" ).appendTo( "body" );
				await getCommonCard(i)
			}

			async function getRareCard(i) {
				var rareCardId = rareArr[getRandomInt(rareArr.length)][0]
				let obj = cards[0].data.cards.find(o => o.uuid == rareCardId);
			  	$.get("https://api.scryfall.com/cards/"+obj.identifiers.scryfallId, function(data){
    				$('#rareCard'+i).prop('src',data.image_uris.normal)
				});	
			}
			
			async function getUncommonCard(i) {
				var uncommonCardId = uncommonArr[getRandomInt(uncommonArr.length)][0]
				let obj = cards[0].data.cards.find(o => o.uuid == uncommonCardId);
			  	$.get("https://api.scryfall.com/cards/"+obj.identifiers.scryfallId, function(data){
    				$('#uncommonCard'+i).prop('src',data.image_uris.normal)
				});	
			}

			async function getCommonCard(i) {
				var commonCardId = commonArr[getRandomInt(commonArr.length)][0]
				let obj = cards[0].data.cards.find(o => o.uuid == commonCardId);
			  	$.get("https://api.scryfall.com/cards/"+obj.identifiers.scryfallId, function(data){
    				$('#commonCard'+i).prop('src',data.image_uris.normal)
				});	
			}

			async function getLandCard(i) {
				var landCardId = landArr[getRandomInt(landArr.length)][0]
				let obj = cards[0].data.cards.find(o => o.uuid == landCardId);
			  	$.get("https://api.scryfall.com/cards/"+obj.identifiers.scryfallId, function(data){
    				$('#landCard').prop('src',data.image_uris.normal)    				
				});	
			}
			

		})



		</script>

	</body>
</html>